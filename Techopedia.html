<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity Veil: The Final Confluence - CLASSIFIED</title>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier Prime', monospace;
            background: linear-gradient(45deg, #2c2416 0%, #3d3426 50%, #2c2416 100%);
            color: #d4c4a0;
            overflow-x: hidden;
            position: relative;
        }

        /* Global Glitch Background Effects */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 0, 0.03) 2px,
                    rgba(0, 255, 0, 0.03) 4px
                );
            animation: scanlines 0.1s linear infinite;
            pointer-events: none;
            z-index: 1;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, transparent 50%, rgba(0, 255, 0, 0.02) 100%),
                radial-gradient(circle at 80% 20%, transparent 50%, rgba(255, 0, 0, 0.02) 100%),
                radial-gradient(circle at 40% 40%, transparent 50%, rgba(0, 0, 255, 0.02) 100%);
            animation: staticNoise 0.2s infinite;
            pointer-events: none;
            z-index: 1;
        }

        /* Film grain and dust effects - integrated with glitch */

        @keyframes filmGrain {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        /* Projector flicker */
        .flicker {
            animation: projectorFlicker 3s infinite;
        }

        @keyframes projectorFlicker {
            0%, 98% { opacity: 1; }
            99% { opacity: 0.8; }
            100% { opacity: 1; }
        }

        /* Typewriter effect */
        .typewriter {
            overflow: hidden;
            border-right: 2px solid #8b0000;
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #8b0000; }
        }

        /* Classified stamp */
        .classified-stamp {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #8b0000;
            color: white;
            padding: 10px 20px;
            transform: rotate(15deg);
            font-weight: bold;
            border: 3px solid #8b0000;
            font-size: 18px;
            z-index: 10;
            animation: stampFade 4s infinite;
        }

        @keyframes stampFade {
            0%, 70% { opacity: 1; }
            85% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        /* Paper texture sections */
        .paper-section {
            background: linear-gradient(135deg, #f4f1e8 0%, #e8e0d0 100%);
            color: #2c2416;
            margin: 40px 20px;
            padding: 40px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid #d4c4a0;
        }

        .paper-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 25% 25%, #8b7355 1px, transparent 1px),
                radial-gradient(circle at 75% 75%, #8b7355 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.1;
            pointer-events: none;
        }

        /* Hero section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            background: 
                linear-gradient(rgba(44, 36, 22, 0.8), rgba(44, 36, 22, 0.8)),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1" fill="%23d4c4a0" opacity="0.1"/><circle cx="80" cy="40" r="1" fill="%23d4c4a0" opacity="0.1"/><circle cx="40" cy="80" r="1" fill="%23d4c4a0" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        }

        .hero h1 {
            font-family: 'Special Elite', cursive;
            font-size: 4rem;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
            letter-spacing: 2px;
        }

        .hero .tagline {
            font-size: 1.2rem;
            max-width: 800px;
            line-height: 1.6;
            font-style: italic;
            margin-bottom: 40px;
            border-left: 4px solid #8b0000;
            padding-left: 20px;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(44, 36, 22, 0.95);
            padding: 15px 0;
            z-index: 100;
            border-bottom: 2px solid #8b0000;
        }

        .nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
            gap: 40px;
        }

        .nav a {
            color: #d4c4a0;
            text-decoration: none;
            font-weight: bold;
            padding: 10px 20px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 0, 0, 0.2), transparent);
            transition: left 0.3s ease;
        }

        .nav a:hover {
            border-color: #8b0000;
            background: rgba(139, 0, 0, 0.15);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);
            color: #ffffff;
        }

        .nav a:hover::before {
            left: 100%;
        }

        /* Event sections */
        .event {
            margin: 60px 0;
            position: relative;
        }

        .event h2 {
            font-family: 'Special Elite', cursive;
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: #8b0000;
            text-align: center;
        }

        .event-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }

        .cipher-text {
            font-family: 'Courier Prime', monospace;
            background: #2c2416;
            color: #00ff00;
            padding: 20px;
            border-radius: 5px;
            font-size: 0.9rem;
            line-height: 1.4;
            border: 1px solid #00ff00;
        }

        .map-container {
            position: relative;
            background: #f4f1e8;
            padding: 30px;
            border: 2px solid #8b7355;
            min-height: 250px;
        }

        .route-line {
            position: absolute;
            height: 2px;
            background: #8b0000;
            transform-origin: left center;
        }

        .map-visual {
            position: relative;
            height: 200px;
            background: #e8e0d0;
            width: 100%;
            min-height: 150px;
        }

        .map-point {
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: smoothPulse 3s ease-in-out infinite;
            border: 2px solid rgba(255,255,255,0.3);
            position: relative;
        }

        .map-point::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .map-point:hover {
            transform: scale(1.5);
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
            border-color: rgba(255,255,255,0.8);
            filter: brightness(1.2);
        }

        .map-point:hover::before {
            opacity: 1;
        }

        @keyframes smoothPulse {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
            }
            25% { 
                opacity: 0.8; 
                transform: scale(1.05);
            }
            50% { 
                opacity: 0.6; 
                transform: scale(1.1);
            }
            75% { 
                opacity: 0.8; 
                transform: scale(1.05);
            }
        }

        .interactive-element {
            cursor: pointer;
            transition: all 0.3s ease;
            transform-origin: center;
        }

        .interactive-element:hover {
            transform: scale(1.02) translateY(-1px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            filter: brightness(1.05);
        }

        .cipher-text {
            font-family: 'Courier Prime', monospace;
            background: #2c2416;
            color: #00ff00;
            padding: 20px;
            border-radius: 5px;
            font-size: 0.9rem;
            line-height: 1.4;
            border: 1px solid #00ff00;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cipher-text::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 0, 0.1), transparent);
            transition: left 0.3s ease;
        }

        .cipher-text:hover {
            background: #1a1a0f;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            transform: translateY(-2px);
            border-color: #00ff88;
        }

        .cipher-text:hover::before {
            left: 100%;
        }

        .blueprint {
            background: #1a237e;
            color: #ffffff;
            padding: 30px;
            position: relative;
            border: 1px solid #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .blueprint::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.4s ease;
        }

        .blueprint:hover {
            background: #283593;
            box-shadow: 0 0 25px rgba(26, 35, 126, 0.4);
            transform: translateY(-2px);
            border-color: #64b5f6;
        }

        .blueprint:hover::before {
            left: 100%;
        }

        /* Mini-game styles */
        .mini-game {
            background: rgba(44, 36, 22, 0.9);
            border: 2px solid #8b0000;
            padding: 30px;
            margin: 40px auto;
            border-radius: 10px;
            max-width: 800px;
            width: 100%;
            box-sizing: border-box;
        }

        .code-breaker {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .code-button {
            background: #2c2416;
            color: #d4c4a0;
            border: 1px solid #8b0000;
            padding: 15px;
            cursor: pointer;
            font-family: 'Courier Prime', monospace;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border-radius: 4px;
            font-weight: 500;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .code-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 0, 0, 0.2), transparent);
            transition: left 0.3s ease;
        }

        .code-button:hover {
            background: #3d3426;
            color: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);
            border-color: #aa0000;
        }

        .code-button:hover::before {
            left: 100%;
        }

        .code-button:active {
            transform: translateY(0);
            box-shadow: 0 1px 4px rgba(139, 0, 0, 0.2);
        }

        .code-button.correct {
            background: #2d5016;
            color: white;
            transform: scale(1.02);
            box-shadow: 0 0 15px rgba(45, 80, 22, 0.5);
            border-color: #4caf50;
            transition: all 0.4s ease;
        }

        .code-button.wrong {
            background: #8b0000;
            color: white;
            animation: gentleShake 0.4s ease;
            box-shadow: 0 0 10px rgba(139, 0, 0, 0.6);
        }

        @keyframes gentleShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }

        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .memory-card {
            aspect-ratio: 1;
            background: #2c2416;
            border: 2px solid #8b0000;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border-radius: 6px;
            min-height: 60px;
        }

        .memory-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 0, 0, 0.15), transparent);
            transition: left 0.3s ease;
        }

        .memory-card:hover {
            background: #3d3426;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            border-color: #aa0000;
        }

        .memory-card:hover::before {
            left: 100%;
        }

        .memory-card:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        .memory-card.flipped {
            background: #8b0000;
            color: white;
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.3);
            border-color: #cc0000;
        }

        .memory-card.matched {
            background: #2d5016;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(45, 80, 22, 0.4);
            border-color: #4caf50;
            animation: gentleMatch 0.6s ease-out;
        }

        @keyframes gentleMatch {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1.05); }
        }

        .route-planning {
            position: relative;
            background: #f4f1e8;
            height: 300px;
            border: 2px solid #8b7355;
            margin: 20px 0;
        }

        .route-node {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #8b0000;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .route-node::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .route-node:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
            border-color: #cc0000;
            background: #aa0000;
        }

        .route-node:hover::before {
            opacity: 1;
        }

        .route-node:active {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);
        }

        .route-node.selected {
            background: #2d5016;
            animation: gentleGlow 2s ease-in-out infinite alternate;
            transform: scale(1.1);
            border-color: #4caf50;
        }

        @keyframes gentleGlow {
            from { 
                box-shadow: 0 0 10px rgba(45, 80, 22, 0.4);
                filter: brightness(1);
            }
            to { 
                box-shadow: 0 0 20px rgba(45, 80, 22, 0.6);
                filter: brightness(1.1);
            }
        }

        /* Briefing Room Animations */
        @keyframes lightFlicker {
            0%, 100% { 
                opacity: 1; 
                box-shadow: 0 0 50px rgba(255, 255, 153, 0.8);
            }
            10% { 
                opacity: 0.8; 
                box-shadow: 0 0 30px rgba(255, 255, 153, 0.6);
            }
            20% { 
                opacity: 1; 
                box-shadow: 0 0 50px rgba(255, 255, 153, 0.8);
            }
            30% { 
                opacity: 0.9; 
                box-shadow: 0 0 40px rgba(255, 255, 153, 0.7);
            }
            40% { 
                opacity: 0.7; 
                box-shadow: 0 0 25px rgba(255, 255, 153, 0.5);
            }
            50% { 
                opacity: 1; 
                box-shadow: 0 0 50px rgba(255, 255, 153, 0.8);
            }
            85% { 
                opacity: 0.95; 
                box-shadow: 0 0 45px rgba(255, 255, 153, 0.75);
            }
        }

        @keyframes securityBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .drawn-line {
            position: absolute;
            height: 3px;
            background: #2d5016;
            transform-origin: left center;
            animation: drawLine 0.5s ease-out;
        }

        @keyframes drawLine {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        @keyframes revealWebsite {
            0% { 
                opacity: 0; 
                transform: scale(0.9);
                filter: blur(10px);
            }
            100% { 
                opacity: 1; 
                transform: scale(1);
                filter: blur(0px);
            }
        }

        .training-only {
            display: block;
        }

        .decrypted .training-only {
            display: none;
        }

        .game-status {
            background: rgba(139, 0, 0, 0.1);
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #8b0000;
            text-align: center;
            font-weight: bold;
            border-radius: 4px;
        }

        .floating-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(139, 0, 0, 0.95);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 1000;
            animation: fadeInOut 2s ease-in-out;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .blueprint-visual {
            position: relative;
            height: 250px;
            width: 100%;
            min-height: 200px;
        }

        .blueprint-element {
            position: absolute;
            border: 2px solid white;
        }

        .blueprint {
            background: #1a237e;
            color: #ffffff;
            padding: 30px;
            position: relative;
            border: 1px solid #ffffff;
        }

        .blueprint::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 40px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #8b0000;
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            margin: 40px 0;
            padding: 20px;
            background: rgba(244, 241, 232, 0.1);
            border: 1px solid #d4c4a0;
            width: 45%;
        }

        .timeline-item:nth-child(odd) {
            margin-left: 55%;
        }

        .timeline-item:nth-child(even) {
            margin-right: 55%;
        }

        /* Contact form */
        .contact-form {
            max-width: 600px;
            margin: 0 auto;
            background: #f4f1e8;
            color: #2c2416;
            padding: 40px;
            border: 2px solid #8b7355;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #8b7355;
            background: rgba(255,255,255,0.8);
            font-family: 'Courier Prime', monospace;
        }

        .submit-btn {
            background: #8b0000;
            color: white;
            padding: 15px 30px;
            border: none;
            font-family: 'Courier Prime', monospace;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.4s ease;
        }

        .submit-btn:hover {
            background: #660000;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4);
            border-color: #ff4444;
            letter-spacing: 1px;
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.5);
        }

        /* Enhanced Smooth Glitch Effects */
        @keyframes digitalGlitch {
            0% { transform: translateX(0) skew(0deg); filter: hue-rotate(0deg); }
            5% { transform: translateX(-1px) skew(-0.5deg); filter: hue-rotate(10deg); }
            10% { transform: translateX(1px) skew(0.5deg); filter: hue-rotate(-10deg); }
            15% { transform: translateX(-0.5px) skew(-0.2deg); filter: hue-rotate(5deg); }
            20% { transform: translateX(0.5px) skew(0.2deg); filter: hue-rotate(-5deg); }
            25% { transform: translateX(0) skew(0deg); filter: hue-rotate(0deg); }
            100% { transform: translateX(0) skew(0deg); filter: hue-rotate(0deg); }
        }

        /* Smooth Room-specific glitch effects */
        @keyframes roomGlitch {
            0%, 92% { 
                filter: none; 
                transform: translateX(0);
                transition: all 0.3s ease;
            }
            94% { 
                filter: hue-rotate(45deg) contrast(120%) brightness(110%); 
                transform: translateX(-1px);
                transition: all 0.1s ease;
            }
            96% { 
                filter: hue-rotate(90deg) contrast(130%) brightness(120%); 
                transform: translateX(1px);
                transition: all 0.1s ease;
            }
            98% { 
                filter: hue-rotate(180deg) contrast(140%) brightness(130%); 
                transform: translateX(-0.5px);
                transition: all 0.1s ease;
            }
            99% { 
                filter: hue-rotate(270deg) contrast(110%) brightness(105%); 
                transform: translateX(0.5px);
                transition: all 0.1s ease;
            }
            100% { 
                filter: none; 
                transform: translateX(0);
                transition: all 0.3s ease;
            }
        }

        @keyframes roomStaticNoise {
            0%, 100% { 
                background-position: 0 0; 
                opacity: 0.03;
                transition: opacity 0.2s ease;
            }
            25% { 
                background-position: 5px 3px; 
                opacity: 0.08;
                transition: opacity 0.1s ease;
            }
            50% { 
                background-position: -3px 5px; 
                opacity: 0.05;
                transition: opacity 0.1s ease;
            }
            75% { 
                background-position: 4px -2px; 
                opacity: 0.07;
                transition: opacity 0.1s ease;
            }
        }

        @keyframes roomScanlines {
            0% { 
                transform: translateY(-100%); 
                opacity: 0.8;
            }
            10% { 
                opacity: 1;
            }
            90% { 
                opacity: 1;
            }
            100% { 
                transform: translateY(100vh); 
                opacity: 0.8;
            }
        }

        @keyframes scanlines {
            0% { 
                background-position: 0 0; 
                opacity: 0.8;
            }
            50% { 
                background-position: 0 50px; 
                opacity: 1;
            }
            100% { 
                background-position: 0 100px; 
                opacity: 0.8;
            }
        }

        @keyframes staticNoise {
            0%, 100% { 
                opacity: 0.02; 
                transform: scale(1);
            }
            25% { 
                opacity: 0.05; 
                transform: scale(1.01);
            }
            50% { 
                opacity: 0.04; 
                transform: scale(0.99);
            }
            75% { 
                opacity: 0.06; 
                transform: scale(1.005);
            }
        }

        @keyframes dataStream {
            0% { 
                transform: translateY(-100%) scale(0.8); 
                opacity: 0; 
                filter: blur(2px);
            }
            5% { 
                opacity: 0.3; 
                filter: blur(1px);
            }
            10% { 
                opacity: 0.8; 
                transform: translateY(-90%) scale(0.9);
                filter: blur(0px);
            }
            85% { 
                opacity: 0.8; 
                transform: translateY(85vh) scale(0.9);
                filter: blur(0px);
            }
            95% { 
                opacity: 0.3; 
                filter: blur(1px);
            }
            100% { 
                transform: translateY(100vh) scale(0.8); 
                opacity: 0; 
                filter: blur(2px);
            }
        }

        /* Enhanced Responsive Design */
        @media (max-width: 1400px) {
            .paper-section { max-width: 1200px; margin: 40px auto; }
            .hero { max-width: 1400px; margin: 0 auto; }
        }

        @media (max-width: 1200px) {
            .hero h1 { font-size: 3.5rem; }
            .event-content { gap: 30px; }
            .paper-section { margin: 30px 15px; padding: 30px; }
            .mini-game { margin: 30px 15px; max-width: none; }
        }

        @media (max-width: 992px) {
            .hero h1 { font-size: 3rem; }
            .event-content { 
                grid-template-columns: 1fr; 
                gap: 20px; 
            }
            .nav ul { 
                flex-wrap: wrap; 
                gap: 15px; 
                justify-content: center;
                padding: 0 20px;
            }
            .timeline-item { 
                width: 85%; 
                margin-left: 7.5% !important; 
                margin-right: 7.5% !important; 
            }
            .code-breaker { 
                grid-template-columns: repeat(2, 1fr); 
                gap: 15px;
                max-width: 400px;
                margin: 20px auto;
            }
            .memory-game { 
                grid-template-columns: repeat(3, 1fr); 
                gap: 12px;
                max-width: 350px;
                margin: 20px auto;
            }
            .mini-game {
                margin: 25px 10px;
                padding: 25px 20px;
            }
        }

        @media (max-width: 768px) {
            .hero h1 { 
                font-size: 2.5rem; 
                line-height: 1.2;
                margin-bottom: 15px;
            }
            .hero .tagline { 
                font-size: 1rem; 
                padding: 0 20px; 
                margin-bottom: 30px;
            }
            .nav ul { 
                flex-direction: column; 
                gap: 8px; 
                padding: 0 20px; 
            }
            .nav a { 
                padding: 12px 20px; 
                font-size: 0.95rem; 
                text-align: center;
                border-radius: 4px;
            }
            .paper-section { 
                margin: 20px 10px; 
                padding: 25px 20px; 
            }
            .map-visual { 
                height: 220px; 
                min-height: 180px; 
            }
            .blueprint-visual { 
                height: 220px; 
                min-height: 180px; 
            }
            .map-point { 
                width: 14px; 
                height: 14px; 
            }
            .route-planning { 
                height: 280px; 
                margin: 15px 0;
            }
            .route-node { 
                width: 28px; 
                height: 28px; 
                font-size: 0.85rem; 
                font-weight: bold;
            }
            .mini-game { 
                padding: 25px 20px; 
                margin: 20px 5px; 
                border-radius: 8px;
            }
            .mini-game h3 {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }
            .contact-form { 
                padding: 25px 20px; 
            }
            .game-status {
                padding: 12px;
                font-size: 0.9rem;
                margin: 15px 0;
            }
            
            /* Mobile briefing adjustments */
            #mission-briefing #briefing-content { 
                padding: 25px 20px; 
                font-size: 1.1rem;
            }
            #decryption-header { 
                padding: 20px 15px; 
                margin-bottom: 25px;
            }
            #decryption-header div:first-child { 
                font-size: 1.1rem; 
            }
            #briefing-text { 
                font-size: 1.05rem; 
                line-height: 1.6; 
                padding: 20px 15px;
                min-height: 200px;
            }
        }

        @media (max-width: 480px) {
            .hero h1 { 
                font-size: 2rem; 
                line-height: 1.1; 
                margin-bottom: 10px;
            }
            .hero .tagline { 
                font-size: 0.9rem; 
                padding: 0 15px;
                margin-bottom: 25px;
            }
            .classified-stamp { 
                top: 10px; 
                right: 10px; 
                padding: 6px 12px; 
                font-size: 12px;
                transform: rotate(8deg);
            }
            .paper-section { 
                margin: 15px 8px; 
                padding: 20px 15px; 
            }
            .map-visual { 
                height: 180px; 
                min-height: 150px; 
            }
            .blueprint-visual { 
                height: 180px; 
                min-height: 150px; 
            }
            .route-line { 
                height: 2px; 
            }
            .code-breaker { 
                grid-template-columns: 1fr; 
                gap: 10px; 
                max-width: 300px;
                margin: 0 auto;
            }
            .memory-game { 
                grid-template-columns: repeat(2, 1fr); 
                gap: 10px; 
                max-width: 250px;
                margin: 0 auto;
            }
            .route-planning { 
                height: 220px; 
                margin: 10px 0;
            }
            .route-node { 
                width: 24px; 
                height: 24px; 
                font-size: 0.75rem; 
                font-weight: bold;
            }
            .timeline-item { 
                width: 95%; 
                margin-left: 2.5% !important; 
                margin-right: 2.5% !important; 
                padding: 15px;
            }
            .mini-game {
                margin: 15px 5px;
                padding: 20px 15px;
            }
            .mini-game h3 {
                font-size: 1.1rem;
                margin-bottom: 12px;
            }
            .mini-game p {
                font-size: 0.9rem;
                margin-bottom: 15px;
            }
            
            /* Mobile briefing optimizations */
            #mission-briefing #briefing-content { 
                padding: 20px 15px; 
                font-size: 1rem;
            }
            #decryption-header { 
                padding: 15px 12px; 
                margin-bottom: 20px;
            }
            #decryption-header div:first-child { 
                font-size: 0.95rem; 
            }
            #briefing-text { 
                font-size: 0.95rem; 
                line-height: 1.5; 
                padding: 15px 12px;
                min-height: 180px;
            }
            #briefing-continue button {
                padding: 15px 25px;
                font-size: 1rem;
                width: 100%;
                max-width: 280px;
            }
            
            /* Training section mobile */
            #training-section h1 {
                font-size: 1.8rem;
                margin-bottom: 15px;
                text-align: center;
                padding: 0 10px;
            }
            #training-section > div:first-child p {
                font-size: 0.95rem;
                padding: 0 15px;
                text-align: center;
            }
        }

        /* Landscape mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            .hero { 
                min-height: 85vh; 
                padding: 20px 0;
            }
            .hero h1 { 
                font-size: 2.2rem; 
                margin-bottom: 10px;
            }
            .hero .tagline { 
                font-size: 0.9rem; 
                margin-bottom: 20px;
            }
            #mission-briefing #briefing-content { 
                min-height: 85vh; 
                padding: 15px 20px;
            }
            .mini-game {
                margin: 15px 10px;
                padding: 20px;
            }
            .route-planning {
                height: 200px;
            }
        }

        /* High DPI displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .map-point {
                border-width: 1px;
            }
            .route-node {
                border-width: 1px;
            }
        }

        /* Container queries for better component responsiveness */
        @container (max-width: 600px) {
            .event-content {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Data stream effects removed for cleaner experience -->
    
    <div class="classified-stamp">CLASSIFIED</div>
    
    <!-- Mission Briefing Section - Shows First -->
    <section id="mission-briefing" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%); z-index: 10000; color: #d4c4a0; font-family: 'Courier Prime', monospace; overflow-y: auto; animation: roomGlitch 8s infinite;">
        
        <!-- Room Glitch Effects -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 255, 0, 0.02) 2px, rgba(0, 255, 0, 0.02) 4px); animation: roomScanlines 0.15s linear infinite; pointer-events: none; z-index: 1;"></div>
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 30% 70%, transparent 50%, rgba(255, 0, 0, 0.03) 100%), radial-gradient(circle at 70% 30%, transparent 50%, rgba(0, 0, 255, 0.03) 100%); animation: roomStaticNoise 0.3s infinite; pointer-events: none; z-index: 1;"></div>
        
        <!-- Data stream removed for cleaner experience -->
        <!-- Secret Room Background Elements -->
        <div class="room-elements" style="position: relative; z-index: 2;">
            <!-- Flickering overhead lights -->
            <div class="ceiling-light" style="position: absolute; top: 10%; left: 20%; width: 60px; height: 20px; background: linear-gradient(to bottom, #ffff99, #ffffcc); border-radius: 30px; box-shadow: 0 0 50px rgba(255, 255, 153, 0.8); animation: lightFlicker 3s infinite;"></div>
            <div class="ceiling-light" style="position: absolute; top: 10%; right: 20%; width: 60px; height: 20px; background: linear-gradient(to bottom, #ffff99, #ffffcc); border-radius: 30px; box-shadow: 0 0 50px rgba(255, 255, 153, 0.8); animation: lightFlicker 4s infinite 1s;"></div>
            
            <!-- Wall panels -->
            <div style="position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: repeating-linear-gradient(90deg, transparent 0px, transparent 98px, rgba(100, 100, 100, 0.1) 100px); pointer-events: none;"></div>
            <div style="position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: repeating-linear-gradient(0deg, transparent 0px, transparent 98px, rgba(100, 100, 100, 0.1) 100px); pointer-events: none;"></div>
            
            <!-- Ventilation grates -->
            <div style="position: absolute; top: 5%; right: 5%; width: 80px; height: 30px; background: linear-gradient(90deg, #333 0%, #333 20%, transparent 20%, transparent 40%, #333 40%, #333 60%, transparent 60%, transparent 80%, #333 80%); border: 1px solid #555;"></div>
            <div style="position: absolute; bottom: 5%; left: 5%; width: 80px; height: 30px; background: linear-gradient(90deg, #333 0%, #333 20%, transparent 20%, transparent 40%, #333 40%, #333 60%, transparent 60%, transparent 80%, #333 80%); border: 1px solid #555;"></div>
            
            <!-- Security camera -->
            <div style="position: absolute; top: 8%; right: 8%; width: 20px; height: 15px; background: #333; border-radius: 5px; box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);"></div>
            <div style="position: absolute; top: 10%; right: 10%; width: 5px; height: 5px; background: #ff0000; border-radius: 50%; animation: securityBlink 2s infinite;"></div>
        </div>
        
        <div id="briefing-content" style="text-align: center; max-width: 800px; padding: 40px; margin: 0 auto; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; position: relative; z-index: 10;">
            <!-- Decryption Header -->
            <div id="decryption-header" style="margin-bottom: 30px; padding: 20px; border: 2px solid #00ff00; background: rgba(0, 0, 0, 0.8);">
                <div style="color: #00ff00; font-size: 1.2rem; margin-bottom: 10px;">SECURE TRANSMISSION DECRYPTING...</div>
                <div id="decryption-progress" style="width: 100%; height: 10px; border: 1px solid #00ff00; background: transparent;">
                    <div id="decryption-bar" style="height: 100%; background: #00ff00; width: 0%; transition: width 0.3s ease;"></div>
                </div>
                <div id="decryption-status" style="color: #ffff00; font-size: 0.9rem; margin-top: 10px;">ESTABLISHING SECURE CHANNEL...</div>
            </div>
            
            <div id="briefing-text" style="font-size: 1.5rem; line-height: 1.8; margin-bottom: 40px; min-height: 200px; text-align: left; background: rgba(0, 0, 0, 0.7); padding: 20px; border: 1px solid #444;"></div>
            <div id="briefing-continue" style="display: none;">
                <button onclick="startTraining()" style="background: #8b0000; color: white; padding: 20px 40px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace; font-size: 1.2rem; font-weight: bold; animation: pulse 2s infinite;">ACCEPT MISSION</button>
            </div>
        </div>
    </section>

    <!-- Training Section - Shows After Briefing -->
    <section id="training-section" class="training-only" style="min-height: 100vh; display: none; flex-direction: column; justify-content: center; align-items: center; background: linear-gradient(45deg, #2c2416 0%, #3d3426 50%, #2c2416 100%); padding: 40px 20px;">
        <div style="text-align: center; margin-bottom: 60px;">
            <h1 style="font-family: 'Special Elite', cursive; font-size: 3rem; color: #8b0000; margin-bottom: 20px;">AGENT VERIFICATION REQUIRED</h1>
            <p style="font-size: 1.2rem; color: #d4c4a0; max-width: 600px; margin: 0 auto;">Complete all three training protocols to gain access to classified Trinity Veil intelligence.</p>
        </div>
        
        <!-- Mini-Games Section -->
        <div style="max-width: 1200px; width: 100%;">
            <!-- Code Breaker Game -->
            <div class="mini-game">
                <h3 style="color: #8b0000; margin-bottom: 20px;">🔐 CODE BREAKER CHALLENGE</h3>
                <p style="margin-bottom: 20px;">Decode the enemy cipher by finding the correct sequence. Each symbol represents a number.</p>
                <div class="game-status" id="code-status">Attempts remaining: 3 | Find the sequence: ★ ◆ ▲ ●</div>
                <div class="code-breaker" id="code-breaker">
                    <button class="code-button" onclick="selectCode(this, '★')">★</button>
                    <button class="code-button" onclick="selectCode(this, '◆')">◆</button>
                    <button class="code-button" onclick="selectCode(this, '▲')">▲</button>
                    <button class="code-button" onclick="selectCode(this, '●')">●</button>
                    <button class="code-button" onclick="selectCode(this, '♦')">♦</button>
                    <button class="code-button" onclick="selectCode(this, '♠')">♠</button>
                    <button class="code-button" onclick="selectCode(this, '♣')">♣</button>
                    <button class="code-button" onclick="selectCode(this, '♥')">♥</button>
                </div>
                <div style="text-align: center;">
                    <button onclick="resetCodeGame()" style="background: #8b0000; color: white; padding: 10px 20px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace;">RESET CIPHER</button>
                </div>
            </div>

            <!-- Memory Game -->
            <div class="mini-game">
                <h3 style="color: #8b0000; margin-bottom: 20px;">🧠 AGENT MEMORY TEST</h3>
                <p style="margin-bottom: 20px;">Memorize the locations of matching intelligence files. Match all pairs to complete training.</p>
                <div class="game-status" id="memory-status">Moves: 0 | Pairs found: 0/6</div>
                <div class="memory-game" id="memory-game">
                    <!-- Memory cards will be generated by JavaScript -->
                </div>
                <div style="text-align: center;">
                    <button onclick="resetMemoryGame()" style="background: #8b0000; color: white; padding: 10px 20px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace;">NEW GAME</button>
                </div>
            </div>

            <!-- Route Planning Game -->
            <div class="mini-game">
                <h3 style="color: #8b0000; margin-bottom: 20px;">🗺️ TACTICAL ROUTE PLANNING</h3>
                <p style="margin-bottom: 20px;">Connect all checkpoints in the correct order: A → B → C → D → E. Click nodes to create your route.</p>
                <div class="game-status" id="route-status">Select starting point A</div>
                <div class="route-planning" id="route-planning">
                    <div class="route-node" onclick="selectRouteNode(this, 'A')" style="top: 20%; left: 10%;">A</div>
                    <div class="route-node" onclick="selectRouteNode(this, 'B')" style="top: 60%; left: 25%;">B</div>
                    <div class="route-node" onclick="selectRouteNode(this, 'C')" style="top: 30%; left: 50%;">C</div>
                    <div class="route-node" onclick="selectRouteNode(this, 'D')" style="top: 70%; left: 70%;">D</div>
                    <div class="route-node" onclick="selectRouteNode(this, 'E')" style="top: 40%; left: 85%;">E</div>
                </div>
                <div style="text-align: center;">
                    <button onclick="resetRouteGame()" style="background: #8b0000; color: white; padding: 10px 20px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace;">RESET ROUTE</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Website Content - Hidden Initially -->
    <div id="main-content" class="flicker">
    
    <nav class="nav">
        <ul>
            <li><a href="#hero">Mission Brief</a></li>
            <li><a href="#signal">Signal Room</a></li>
            <li><a href="#route">Iron Route</a></li>
            <li><a href="#forge">Black Forge</a></li>
            <li><a href="#convergence">Convergence</a></li>

            <li><a href="#timeline">Mission Log</a></li>
            <li><a href="#contact">Recruitment</a></li>
        </ul>
    </nav>

    <section id="hero" class="hero">
        <h1 class="typewriter">TRINITY VEIL: THE FINAL CONFLUENCE</h1>
        <p class="tagline">"The war is an equation with too many unknowns — and every variable is human lives."</p>
        <div style="margin-top: 40px; padding: 20px; border: 2px solid #8b0000; background: rgba(139, 0, 0, 0.1);">
            <p><strong>OPERATION STATUS:</strong> ACTIVE</p>
            <p><strong>CLEARANCE LEVEL:</strong> ULTRA SECRET</p>
            <p><strong>DISTRIBUTION:</strong> EYES ONLY</p>
        </div>
    </section>

    <section class="paper-section">
        <h2 style="font-family: 'Special Elite', cursive; color: #8b0000; margin-bottom: 30px;">DECLASSIFIED BRIEFING NOTES</h2>
        <div style="columns: 2; column-gap: 40px; text-align: justify;">
            <p style="margin-bottom: 20px;"><strong>INTELLIGENCE SUMMARY:</strong> Hidden laboratories across occupied territories have been conducting research into advanced weaponry. Our cryptographers have intercepted fragments of communications suggesting a convergence of three critical components.</p>
            
            <p style="margin-bottom: 20px;">The burden of intellect weighs heavily on those who understand the true implications. Each decoded message, each negotiated route, each blueprint brings us closer to a weapon that could end the war — or humanity itself.</p>
            
            <p><strong>MISSION OBJECTIVE:</strong> Infiltrate the network, gather intelligence on the three components, and determine the final course of action. The fate of millions rests on the decisions made in the coming days.</p>
        </div>
    </section>

    <section id="signal" class="event">
        <div class="paper-section">
            <h2>EVENT 1: THE SIGNAL ROOM</h2>
            <div class="event-content">
                <div>
                    <h3 style="color: #8b0000; margin-bottom: 20px;">INTERCEPTED TRANSMISSION</h3>
                    <p style="margin-bottom: 20px;">Our cryptographers work around the clock, decoding enemy transmissions. Each cipher holds a piece of the puzzle.</p>
                    <p><strong>STATUS:</strong> Fragments decoded reveal references to "Trinity Components" and coordinates for secret facilities.</p>
                </div>
                <div class="cipher-text interactive-element" onclick="toggleDecryption()" title="Click to enhance decryption">
                    <div style="margin-bottom: 15px;">>> DECRYPTION IN PROGRESS...</div>
                    <div id="cipher-line-1">XKJH-7742: COMPONENT ALPHA SECURED</div>
                    <div id="cipher-line-2">GRID REF: 52.3°N, 13.4°E</div>
                    <div id="cipher-line-3">NEXT PHASE: IRON ROUTE ACTIVATION</div>
                    <div id="cipher-line-4">CAUTION: EXTREME PAYLOAD</div>
                    <div style="margin-top: 15px; color: #ff6b6b;" id="cipher-status">>> PARTIAL DECODE COMPLETE</div>
                </div>
            </div>
        </div>
    </section>

    <section id="route" class="event">
        <div class="paper-section">
            <h2>EVENT 2: THE IRON ROUTE</h2>
            <div class="event-content">
                <div class="map-container">
                    <h3 style="color: #8b0000; margin-bottom: 20px;">DIPLOMATIC ROUTES</h3>
                    <div class="map-visual">
                        <div class="map-point interactive-element" onclick="showLocationInfo('berlin')" style="top: 25%; left: 10%; background: #8b0000;" title="Berlin - Component Alpha"></div>
                        <div class="map-point interactive-element" onclick="showLocationInfo('compromised')" style="top: 40%; right: 15%; background: #2d5016;" title="Compromised Route - Danger"></div>
                        <div class="map-point interactive-element" onclick="showLocationInfo('rendezvous')" style="bottom: 20%; left: 50%; background: #8b0000; transform: translateX(-50%);" title="Rendezvous Point"></div>
                        <div class="route-line" style="top: 28%; left: 12%; width: 60%; transform: rotate(15deg);"></div>
                        <div class="route-line" style="bottom: 23%; left: 50%; width: 35%; transform: translateX(-50%) rotate(-30deg);"></div>
                    </div>
                    <div style="margin-top: 20px; display: flex; gap: 20px; flex-wrap: wrap;">
                        <div style="background: #8b0000; color: white; padding: 5px 10px; font-size: 12px;">SECURED</div>
                        <div style="background: #2d5016; color: white; padding: 5px 10px; font-size: 12px;">COMPROMISED</div>
                    </div>
                </div>
                <div>
                    <h3 style="color: #8b0000; margin-bottom: 20px;">NEGOTIATION STATUS</h3>
                    <p style="margin-bottom: 15px;">Diplomatic operatives have established secure transport corridors through neutral territories.</p>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="margin-bottom: 10px;">✓ Route Alpha: OPERATIONAL</li>
                        <li style="margin-bottom: 10px;">⚠ Route Beta: UNDER SURVEILLANCE</li>
                        <li style="margin-bottom: 10px;">✗ Route Gamma: COMPROMISED</li>
                    </ul>
                    <p style="margin-top: 20px; font-style: italic; color: #8b0000;">"Every mile traveled brings us closer to the point of no return."</p>
                </div>
            </div>
        </div>
    </section>

    <section id="forge" class="event">
        <div class="paper-section">
            <h2>EVENT 3: THE BLACK FORGE</h2>
            <div class="event-content">
                <div>
                    <h3 style="color: #8b0000; margin-bottom: 20px;">ENGINEERING REPORT</h3>
                    <p style="margin-bottom: 20px;">Our engineers have successfully designed the containment casing. The blueprints reveal the true scale of what we're dealing with.</p>
                    <p><strong>MATERIAL REQUIREMENTS:</strong></p>
                    <ul style="margin: 15px 0; padding-left: 20px;">
                        <li>Reinforced steel plating (12mm)</li>
                        <li>Lead shielding (8mm inner layer)</li>
                        <li>Specialized detonation mechanism</li>
                        <li>Pressure-resistant seals</li>
                    </ul>
                    <p style="color: #8b0000; font-weight: bold;">WARNING: Handle with extreme caution</p>
                </div>
                <div class="blueprint interactive-element" onclick="animateBlueprint()" title="Click to analyze blueprint">
                    <h3 style="margin-bottom: 20px;">BLUEPRINT - CLASSIFIED</h3>
                    <div class="blueprint-visual">
                        <div class="blueprint-element" id="outer-casing" style="top: 20%; left: 15%; width: 70%; height: 40%; background: rgba(255,255,255,0.1);"></div>
                        <div class="blueprint-element" id="lead-shield" style="top: 28%; left: 22%; width: 56%; height: 24%; border: 1px solid white;"></div>
                        <div id="core-element" style="position: absolute; top: 36%; left: 30%; width: 40%; height: 8%; background: rgba(255,255,255,0.3);"></div>
                        <div style="position: absolute; top: 12%; left: 18%; font-size: 10px;">OUTER CASING</div>
                        <div style="position: absolute; top: 20%; left: 25%; font-size: 10px;">LEAD SHIELD</div>
                        <div style="position: absolute; top: 28%; left: 32%; font-size: 10px;">CORE</div>
                        <div style="position: absolute; bottom: 8%; right: 8%; font-size: 12px; color: #ff6b6b;">PROJECT: TRINITY</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="convergence" class="event">
        <div class="paper-section">
            <h2>EVENT 4: THE CONVERGENCE BRIEFING</h2>
            <div style="text-align: center; margin-bottom: 40px;">
                <p style="font-size: 1.2rem; color: #8b0000; font-weight: bold;">ALL COMPONENTS SECURED - WEAPON IS READY</p>
                <p style="margin-top: 20px; font-style: italic;">"The moment of truth has arrived. The power to end this war — and perhaps civilization itself — is now in our hands."</p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <div style="background: rgba(139, 0, 0, 0.1); padding: 20px; border: 1px solid #8b0000; text-align: center;">
                    <h4 style="color: #8b0000; margin-bottom: 10px;">SIGNAL DECODED</h4>
                    <p style="font-size: 0.9rem;">Enemy communications intercepted and analyzed</p>
                </div>
                <div style="background: rgba(45, 80, 22, 0.1); padding: 20px; border: 1px solid #2d5016; text-align: center;">
                    <h4 style="color: #2d5016; margin-bottom: 10px;">ROUTE SECURED</h4>
                    <p style="font-size: 0.9rem;">Transport corridors established</p>
                </div>
                <div style="background: rgba(26, 35, 126, 0.1); padding: 20px; border: 1px solid #1a237e; text-align: center;">
                    <h4 style="color: #1a237e; margin-bottom: 10px;">CASING COMPLETE</h4>
                    <p style="font-size: 0.9rem;">Containment system operational</p>
                </div>
            </div>

            <div style="background: rgba(139, 0, 0, 0.2); padding: 30px; border: 3px solid #8b0000;">
                <h3 style="text-align: center; margin-bottom: 30px; color: #8b0000;">FINAL DECISION REQUIRED</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                    <button onclick="makeChoice('strike')" style="background: #8b0000; color: white; padding: 15px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace; font-weight: bold;">STRIKE</button>
                    <button onclick="makeChoice('delay')" style="background: #b8860b; color: white; padding: 15px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace; font-weight: bold;">DELAY</button>
                    <button onclick="makeChoice('sabotage')" style="background: #2d5016; color: white; padding: 15px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace; font-weight: bold;">SABOTAGE</button>
                    <button onclick="makeChoice('redirect')" style="background: #1a237e; color: white; padding: 15px; border: none; cursor: pointer; font-family: 'Courier Prime', monospace; font-weight: bold;">REDIRECT</button>
                </div>
                <div id="choice-result" style="margin-top: 20px; padding: 20px; background: rgba(0,0,0,0.3); display: none;">
                    <p id="choice-text" style="font-weight: bold; text-align: center;"></p>
                </div>
            </div>
        </div>
    </section>



    <section id="timeline" class="timeline">
        <div class="paper-section">
            <h2 style="text-align: center; margin-bottom: 50px;">MISSION LOGBOOK</h2>
            <div class="timeline-item">
                <h4 style="color: #8b0000; margin-bottom: 10px;">DAY 1 - SIGNAL INTERCEPT</h4>
                <p>First encrypted transmission detected. Cryptography team activated.</p>
            </div>
            <div class="timeline-item">
                <h4 style="color: #8b0000; margin-bottom: 10px;">DAY 7 - ROUTE NEGOTIATION</h4>
                <p>Diplomatic channels opened. Secure transport corridors identified.</p>
            </div>
            <div class="timeline-item">
                <h4 style="color: #8b0000; margin-bottom: 10px;">DAY 14 - BLUEPRINT ACQUISITION</h4>
                <p>Engineering specifications obtained. Containment design finalized.</p>
            </div>
            <div class="timeline-item">
                <h4 style="color: #8b0000; margin-bottom: 10px;">DAY 21 - CONVERGENCE</h4>
                <p>All components secured. Final decision point reached.</p>
            </div>
        </div>
    </section>

    <section id="contact" class="paper-section">
        <h2 style="text-align: center; margin-bottom: 40px;">RECRUITMENT TELEGRAM</h2>
        <div class="contact-form">
            <div style="text-align: center; margin-bottom: 30px; padding: 20px; background: rgba(139, 0, 0, 0.1); border: 2px solid #8b0000;">
                <h3>CLASSIFIED PERSONNEL ONLY</h3>
                <p style="margin-top: 10px;">Security clearance verification required</p>
            </div>
            
            <form onsubmit="submitForm(event)">
                <div class="form-group">
                    <label for="codename">Agent Codename:</label>
                    <input type="text" id="codename" name="codename" required>
                </div>
                <div class="form-group">
                    <label for="clearance">Clearance Level:</label>
                    <select id="clearance" name="clearance" style="width: 100%; padding: 10px; border: 1px solid #8b7355; background: rgba(255,255,255,0.8); font-family: 'Courier Prime', monospace;">
                        <option>CONFIDENTIAL</option>
                        <option>SECRET</option>
                        <option>TOP SECRET</option>
                        <option>ULTRA SECRET</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="specialization">Area of Expertise:</label>
                    <input type="text" id="specialization" name="specialization" placeholder="Cryptography, Engineering, Diplomacy..." required>
                </div>
                <div class="form-group">
                    <label for="message">Mission Brief:</label>
                    <textarea id="message" name="message" rows="4" placeholder="State your interest in Operation Trinity Veil..." required></textarea>
                </div>
                <button type="submit" class="submit-btn">TRANSMIT SECURE MESSAGE</button>
            </form>
            
            <div id="form-response" style="margin-top: 20px; padding: 20px; background: rgba(45, 80, 22, 0.2); border: 1px solid #2d5016; display: none;">
                <p style="font-weight: bold; color: #2d5016;">MESSAGE TRANSMITTED SUCCESSFULLY</p>
                <p style="margin-top: 10px;">Your recruitment application has been forwarded to Command. Await further instructions.</p>
            </div>
        </div>
    </section>

    </div> <!-- End main-content -->

    <script>
        // Typewriter effect for hero title
        function typeWriter(element, text, speed = 100) {
            let i = 0;
            element.innerHTML = '';
            element.style.borderRight = '2px solid #8b0000';
            
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else {
                    // Blinking cursor effect
                    setInterval(() => {
                        element.style.borderRight = element.style.borderRight === 'none' ? '2px solid #8b0000' : 'none';
                    }, 750);
                }
            }
            type();
        }

        // Initialize typewriter effect when page loads
        window.addEventListener('load', () => {
            const heroTitle = document.querySelector('.hero h1');
            if (heroTitle) {
                typeWriter(heroTitle, 'TRINITY VEIL: THE FINAL CONFLUENCE', 80);
            }
        });

        // Choice system for convergence section
        function makeChoice(choice) {
            const resultDiv = document.getElementById('choice-result');
            const textDiv = document.getElementById('choice-text');
            
            const choices = {
                strike: "CHOICE LOGGED: IMMEDIATE STRIKE AUTHORIZED. May history judge us kindly.",
                delay: "CHOICE LOGGED: OPERATION DELAYED. More time to consider the consequences.",
                sabotage: "CHOICE LOGGED: INTERNAL SABOTAGE INITIATED. The weapon will never be completed.",
                redirect: "CHOICE LOGGED: TARGET REDIRECTED. A demonstration of power, not destruction."
            };
            
            textDiv.textContent = choices[choice];
            resultDiv.style.display = 'block';
            
            // Add stamp effect
            setTimeout(() => {
                resultDiv.style.background = 'rgba(139, 0, 0, 0.3)';
                resultDiv.style.border = '2px solid #8b0000';
            }, 500);
        }

        // Form submission
        function submitForm(event) {
            event.preventDefault();
            const responseDiv = document.getElementById('form-response');
            responseDiv.style.display = 'block';
            
            // Scroll to response
            responseDiv.scrollIntoView({ behavior: 'smooth' });
            
            // Reset form after a delay
            setTimeout(() => {
                event.target.reset();
            }, 2000);
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('.nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add random dust particles
        function createDustParticle() {
            const dust = document.createElement('div');
            dust.style.position = 'fixed';
            dust.style.width = '2px';
            dust.style.height = '2px';
            dust.style.background = '#d4c4a0';
            dust.style.borderRadius = '50%';
            dust.style.opacity = '0.3';
            dust.style.pointerEvents = 'none';
            dust.style.zIndex = '2';
            dust.style.left = Math.random() * window.innerWidth + 'px';
            dust.style.top = '-5px';
            
            document.body.appendChild(dust);
            
            const fallDuration = 3000 + Math.random() * 2000;
            dust.animate([
                { transform: 'translateY(0px)', opacity: 0.3 },
                { transform: `translateY(${window.innerHeight + 10}px)`, opacity: 0 }
            ], {
                duration: fallDuration,
                easing: 'linear'
            }).onfinish = () => dust.remove();
        }

        // Create dust particles periodically
        setInterval(createDustParticle, 2000);

        // Interactive Functions
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'floating-notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // Location info for map points
        function showLocationInfo(location) {
            const messages = {
                berlin: "BERLIN FACILITY: Component Alpha secured. High security perimeter detected.",
                compromised: "ROUTE COMPROMISED: Enemy surveillance active. Recommend alternate path.",
                rendezvous: "RENDEZVOUS POINT: Safe house coordinates confirmed. Proceed with caution."
            };
            showNotification(messages[location]);
        }

        // Cipher decryption toggle
        let decryptionLevel = 0;
        function toggleDecryption() {
            decryptionLevel++;
            const lines = ['cipher-line-1', 'cipher-line-2', 'cipher-line-3', 'cipher-line-4'];
            const status = document.getElementById('cipher-status');
            
            if (decryptionLevel === 1) {
                document.getElementById('cipher-line-1').innerHTML = '<span style="color: #ffff00;">DECODED:</span> COMPONENT ALPHA SECURED';
                status.textContent = '>>> ENHANCED DECRYPTION ACTIVE';
                showNotification('Decryption Enhanced!');
            } else if (decryptionLevel === 2) {
                document.getElementById('cipher-line-3').innerHTML = '<span style="color: #ffff00;">DECODED:</span> NEXT PHASE: IRON ROUTE ACTIVATION';
                status.textContent = '>>> FULL DECODE COMPLETE';
                showNotification('Full Decryption Achieved!');
            } else {
                // Reset
                decryptionLevel = 0;
                document.getElementById('cipher-line-1').textContent = 'XKJH-7742: COMPONENT ALPHA SECURED';
                document.getElementById('cipher-line-3').textContent = 'NEXT PHASE: IRON ROUTE ACTIVATION';
                status.textContent = '>>> PARTIAL DECODE COMPLETE';
            }
        }

        // Blueprint animation
        function animateBlueprint() {
            const elements = ['outer-casing', 'lead-shield', 'core-element'];
            elements.forEach((id, index) => {
                setTimeout(() => {
                    const element = document.getElementById(id);
                    element.style.boxShadow = '0 0 20px rgba(255, 255, 255, 0.8)';
                    element.style.transform = 'scale(1.05)';
                    
                    setTimeout(() => {
                        element.style.boxShadow = 'none';
                        element.style.transform = 'scale(1)';
                    }, 1000);
                }, index * 500);
            });
            showNotification('Blueprint Analysis Complete');
        }

        // Code Breaker Game
        let codeSequence = [];
        let correctSequence = ['★', '◆', '▲', '●'];
        let codeAttempts = 3;

        function selectCode(button, symbol) {
            if (codeAttempts <= 0) return;
            
            codeSequence.push(symbol);
            button.style.background = '#8b0000';
            button.style.color = 'white';
            
            if (codeSequence.length === 4) {
                checkCodeSequence();
            }
        }

        function checkCodeSequence() {
            const isCorrect = JSON.stringify(codeSequence) === JSON.stringify(correctSequence);
            const buttons = document.querySelectorAll('.code-button');
            
            if (isCorrect) {
                buttons.forEach(btn => btn.classList.add('correct'));
                document.getElementById('code-status').textContent = 'SUCCESS! Cipher decoded. Agent clearance upgraded.';
                showNotification('Code Broken Successfully!');
                gameCompletions.codeBreaker = true;
                checkAllGamesComplete();
            } else {
                codeAttempts--;
                buttons.forEach(btn => btn.classList.add('wrong'));
                document.getElementById('code-status').textContent = `FAILED! Attempts remaining: ${codeAttempts}`;
                
                setTimeout(() => {
                    buttons.forEach(btn => {
                        btn.classList.remove('wrong');
                        btn.style.background = '#2c2416';
                        btn.style.color = '#d4c4a0';
                    });
                }, 1000);
            }
            
            codeSequence = [];
        }

        function resetCodeGame() {
            codeSequence = [];
            codeAttempts = 3;
            const buttons = document.querySelectorAll('.code-button');
            buttons.forEach(btn => {
                btn.classList.remove('correct', 'wrong');
                btn.style.background = '#2c2416';
                btn.style.color = '#d4c4a0';
            });
            document.getElementById('code-status').textContent = 'Attempts remaining: 3 | Find the sequence: ★ ◆ ▲ ●';
        }

        // Memory Game
        let memoryCards = [];
        let flippedCards = [];
        let memoryMoves = 0;
        let matchedPairs = 0;

        function initMemoryGame() {
            const symbols = ['🔍', '📡', '🗝️', '📋', '🎯', '⚡', '🔍', '📡', '🗝️', '📋', '🎯', '⚡'];
            const shuffled = symbols.sort(() => Math.random() - 0.5);
            const gameContainer = document.getElementById('memory-game');
            gameContainer.innerHTML = '';
            
            shuffled.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.symbol = symbol;
                card.dataset.index = index;
                card.onclick = () => flipMemoryCard(card);
                gameContainer.appendChild(card);
            });
        }

        function flipMemoryCard(card) {
            if (card.classList.contains('flipped') || card.classList.contains('matched') || flippedCards.length >= 2) {
                return;
            }
            
            card.classList.add('flipped');
            card.textContent = card.dataset.symbol;
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                memoryMoves++;
                document.getElementById('memory-status').textContent = `Moves: ${memoryMoves} | Pairs found: ${matchedPairs}/6`;
                
                setTimeout(() => {
                    if (flippedCards[0].dataset.symbol === flippedCards[1].dataset.symbol) {
                        flippedCards.forEach(card => card.classList.add('matched'));
                        matchedPairs++;
                        
                        if (matchedPairs === 6) {
                            showNotification('Memory Test Complete! Excellent work, Agent.');
                            gameCompletions.memory = true;
                            checkAllGamesComplete();
                        }
                    } else {
                        flippedCards.forEach(card => {
                            card.classList.remove('flipped');
                            card.textContent = '';
                        });
                    }
                    
                    flippedCards = [];
                    document.getElementById('memory-status').textContent = `Moves: ${memoryMoves} | Pairs found: ${matchedPairs}/6`;
                }, 1000);
            }
        }

        function resetMemoryGame() {
            memoryMoves = 0;
            matchedPairs = 0;
            flippedCards = [];
            document.getElementById('memory-status').textContent = 'Moves: 0 | Pairs found: 0/6';
            initMemoryGame();
        }

        // Route Planning Game
        let routeSequence = [];
        let correctRoute = ['A', 'B', 'C', 'D', 'E'];

        function selectRouteNode(node, letter) {
            const expectedNext = correctRoute[routeSequence.length];
            
            if (letter === expectedNext) {
                node.classList.add('selected');
                routeSequence.push(letter);
                
                if (routeSequence.length < correctRoute.length) {
                    document.getElementById('route-status').textContent = `Next: Select point ${correctRoute[routeSequence.length]}`;
                } else {
                    document.getElementById('route-status').textContent = 'ROUTE COMPLETE! Mission parameters satisfied.';
                    showNotification('Tactical Route Established!');
                    gameCompletions.route = true;
                    checkAllGamesComplete();
                }
                
                // Draw line to previous node
                if (routeSequence.length > 1) {
                    drawRouteLine(routeSequence.length - 2, routeSequence.length - 1);
                }
            } else {
                // Wrong selection - shake effect
                node.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    node.style.animation = '';
                }, 500);
                showNotification('Incorrect sequence! Follow the tactical order.');
            }
        }

        function drawRouteLine(fromIndex, toIndex) {
            const nodes = document.querySelectorAll('.route-node');
            const fromNode = nodes[fromIndex];
            const toNode = nodes[toIndex];
            
            const fromRect = fromNode.getBoundingClientRect();
            const toRect = toNode.getBoundingClientRect();
            const container = document.getElementById('route-planning').getBoundingClientRect();
            
            const line = document.createElement('div');
            line.className = 'drawn-line';
            
            const deltaX = toRect.left - fromRect.left;
            const deltaY = toRect.top - fromRect.top;
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            const angle = Math.atan2(deltaY, deltaX) * 180 / Math.PI;
            
            line.style.width = distance + 'px';
            line.style.left = (fromRect.left - container.left + 15) + 'px';
            line.style.top = (fromRect.top - container.top + 15) + 'px';
            line.style.transform = `rotate(${angle}deg)`;
            
            document.getElementById('route-planning').appendChild(line);
        }

        function resetRouteGame() {
            routeSequence = [];
            document.getElementById('route-status').textContent = 'Select starting point A';
            
            // Remove all lines
            document.querySelectorAll('.drawn-line').forEach(line => line.remove());
            
            // Reset node states
            document.querySelectorAll('.route-node').forEach(node => {
                node.classList.remove('selected');
            });
        }

        // Game completion tracking
        let gameCompletions = {
            codeBreaker: false,
            memory: false,
            route: false
        };

        function checkAllGamesComplete() {
            const allComplete = Object.values(gameCompletions).every(completed => completed);
            if (allComplete && !document.body.classList.contains('decrypted')) {
                startDecryptionSequence();
            }
        }

        function startDecryptionSequence() {
            // Hide training section
            document.getElementById('training-section').style.display = 'none';
            
            // Show decryption overlay
            const overlay = document.createElement('div');
            overlay.id = 'decryption-overlay';
            overlay.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #00ff00; font-family: 'Courier Prime', monospace;">
                    <div style="text-align: center; max-width: 800px; padding: 40px;">
                        <h1 style="font-size: 3rem; margin-bottom: 30px; animation: glow 1s infinite alternate;">AGENT CLEARANCE VERIFIED</h1>
                        <div id="decryption-text" style="font-size: 1.2rem; margin-bottom: 40px; min-height: 60px;"></div>
                        <div id="progress-bar" style="width: 100%; height: 20px; border: 2px solid #00ff00; background: transparent; margin-bottom: 30px;">
                            <div id="progress-fill" style="height: 100%; background: #00ff00; width: 0%; transition: width 0.5s ease;"></div>
                        </div>
                        <div id="decryption-status" style="font-size: 1rem; color: #ffff00;">INITIALIZING SECURE CONNECTION...</div>
                    </div>
                </div>
            `;
            document.body.appendChild(overlay);
            
            // Decryption sequence
            const messages = [
                "ACCESSING CLASSIFIED DATABASE...",
                "VERIFYING AGENT CREDENTIALS...",
                "DECRYPTING TRINITY VEIL FILES...",
                "ESTABLISHING SECURE CHANNEL...",
                "LOADING MISSION PARAMETERS...",
                "SYNCHRONIZING INTELLIGENCE DATA...",
                "FINALIZING SECURITY PROTOCOLS...",
                "ACCESS GRANTED - WELCOME AGENT"
            ];
            
            let messageIndex = 0;
            let progress = 0;
            
            const decryptionInterval = setInterval(() => {
                if (messageIndex < messages.length) {
                    document.getElementById('decryption-text').textContent = messages[messageIndex];
                    progress = ((messageIndex + 1) / messages.length) * 100;
                    document.getElementById('progress-fill').style.width = progress + '%';
                    
                    if (messageIndex === messages.length - 1) {
                        document.getElementById('decryption-status').textContent = 'DECRYPTION COMPLETE - ENTERING SECURE ZONE';
                        document.getElementById('decryption-status').style.color = '#00ff00';
                    }
                    
                    messageIndex++;
                } else {
                    clearInterval(decryptionInterval);
                    
                    // Final animation before revealing website
                    setTimeout(() => {
                        overlay.style.animation = 'fadeOut 2s ease-out forwards';
                        
                        setTimeout(() => {
                            overlay.remove();
                            document.body.classList.add('decrypted');
                            
                            // Reveal main website with animation
                            const mainContent = document.getElementById('main-content');
                            mainContent.style.display = 'block';
                            mainContent.style.animation = 'revealWebsite 3s ease-out forwards';
                            
                            // Show success notification
                            showNotification('TRINITY VEIL DATABASE ACCESSED - MISSION ACTIVE');
                        }, 2000);
                    }, 1500);
                }
            }, 800);
        }

        // Mission Briefing Animation
        function startMissionBriefing() {
            const briefingMessages = [
                "CLASSIFIED TRANSMISSION INCOMING...",
                "",
                "Agent, you have been selected for Operation Trinity Veil.",
                "",
                "The year is 1945. The war hangs in the balance.",
                "",
                "Intelligence suggests the enemy is developing a weapon of unprecedented power.",
                "",
                "Your mission: Infiltrate their network, decode their secrets, and determine the final course of action.",
                "",
                "The fate of millions rests in your hands.",
                "",
                "To access classified Trinity Veil intelligence, you must first prove your capabilities.",
                "",
                "USER AUTHORIZATION REQUIRED",
                "",
                "Complete the training protocols to gain security clearance.",
                "",
                "Are you ready to accept this mission, Agent?"
            ];
            
            let messageIndex = 0;
            const briefingText = document.getElementById('briefing-text');
            const briefingContent = document.getElementById('briefing-content');
            const decryptionBar = document.getElementById('decryption-bar');
            const decryptionStatus = document.getElementById('decryption-status');
            
            // Decryption status messages
            const decryptionMessages = [
                "ESTABLISHING SECURE CHANNEL...",
                "AUTHENTICATING TRANSMISSION...",
                "DECRYPTING MESSAGE HEADER...",
                "PARSING CLASSIFIED DATA...",
                "VERIFYING AGENT CREDENTIALS...",
                "LOADING MISSION PARAMETERS...",
                "SYNCHRONIZING INTELLIGENCE...",
                "FINALIZING SECURE PROTOCOL...",
                "TRANSMISSION COMPLETE"
            ];
            
            function updateDecryptionProgress() {
                const progress = ((messageIndex + 1) / briefingMessages.length) * 100;
                
                if (decryptionBar) {
                    decryptionBar.style.transition = 'width 0.5s ease-out';
                    decryptionBar.style.width = progress + '%';
                }
                
                const statusIndex = Math.floor((messageIndex / briefingMessages.length) * decryptionMessages.length);
                if (statusIndex < decryptionMessages.length && decryptionStatus) {
                    decryptionStatus.style.transition = 'color 0.3s ease';
                    decryptionStatus.textContent = decryptionMessages[statusIndex];
                }
                
                if (progress >= 100 && decryptionStatus) {
                    decryptionStatus.textContent = "DECRYPTION COMPLETE - SECURE CHANNEL ESTABLISHED";
                    decryptionStatus.style.color = '#00ff00';
                    decryptionStatus.style.textShadow = '0 0 10px rgba(0, 255, 0, 0.5)';
                }
            }
            
            function showNextMessage() {
                if (messageIndex < briefingMessages.length) {
                    const message = briefingMessages[messageIndex];
                    
                    // Update decryption progress
                    updateDecryptionProgress();
                    
                    if (message === "") {
                        // Empty line for spacing
                        briefingText.innerHTML += '<br>';
                        messageIndex++;
                        setTimeout(showNextMessage, 800);
                    } else if (message === "USER AUTHORIZATION REQUIRED") {
                        // Special styling for authorization message
                        briefingText.innerHTML += `<div style="color: #8b0000; font-weight: bold; font-size: 1.8rem; margin: 20px 0; text-align: center; animation: glow 1s infinite alternate; border: 2px solid #8b0000; padding: 15px; background: rgba(139, 0, 0, 0.1);">${message}</div>`;
                        messageIndex++;
                        setTimeout(showNextMessage, 1500);
                    } else {
                        // Regular message with typewriter effect and decryption styling
                        const messageDiv = document.createElement('div');
                        messageDiv.style.marginBottom = '15px';
                        messageDiv.style.color = '#00ff00';
                        messageDiv.style.fontFamily = 'Courier Prime, monospace';
                        briefingText.appendChild(messageDiv);
                        
                        // Add decryption prefix
                        const prefix = `[DECRYPT] `;
                        let charIndex = 0;
                        let fullMessage = prefix + message;
                        
                        function typeMessage() {
                            if (charIndex < fullMessage.length) {
                                messageDiv.textContent += fullMessage.charAt(charIndex);
                                
                                // Add random glitch characters occasionally
                                if (Math.random() < 0.05 && charIndex > prefix.length) {
                                    const glitchChars = '█▓▒░◆▲●♦♠♣♥';
                                    const glitch = glitchChars[Math.floor(Math.random() * glitchChars.length)];
                                    messageDiv.textContent = messageDiv.textContent.slice(0, -1) + glitch;
                                    
                                    setTimeout(() => {
                                        messageDiv.textContent = messageDiv.textContent.slice(0, -1) + fullMessage.charAt(charIndex);
                                        charIndex++;
                                        setTimeout(typeMessage, 20);
                                    }, 50);
                                } else {
                                    charIndex++;
                                    setTimeout(typeMessage, 20);
                                }
                            } else {
                                messageIndex++;
                                // Smooth auto-scroll to keep new content visible
                                briefingContent.scrollTo({
                                    top: briefingContent.scrollHeight,
                                    behavior: 'smooth'
                                });
                                setTimeout(showNextMessage, 1000);
                            }
                        }
                        typeMessage();
                    }
                } else {
                    // Final decryption update
                    updateDecryptionProgress();
                    
                    // Show continue button
                    setTimeout(() => {
                        document.getElementById('briefing-continue').style.display = 'block';
                        // Scroll to show the button
                        briefingContent.scrollTop = briefingContent.scrollHeight;
                    }, 1000);
                }
            }
            
            // Start the briefing sequence
            setTimeout(showNextMessage, 1000);
        }
        
        function startTraining() {
            const briefingSection = document.getElementById('mission-briefing');
            const trainingSection = document.getElementById('training-section');
            
            // Fade out briefing
            briefingSection.style.animation = 'fadeOut 2s ease-out forwards';
            
            setTimeout(() => {
                briefingSection.style.display = 'none';
                trainingSection.style.display = 'flex';
                trainingSection.style.animation = 'revealWebsite 2s ease-out forwards';
            }, 2000);
        }

        // Initialize games when page loads
        window.addEventListener('load', () => {
            initMemoryGame();
            
            // Hide main content initially
            const mainContent = document.getElementById('main-content');
            mainContent.style.display = 'none';
            
            // Start mission briefing
            startMissionBriefing();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'975cfc5c526f8875',t:'MTc1NjMxMjU2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
